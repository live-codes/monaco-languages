var $=n=>{let k={def:{sig:`def method_name(args)
  body
end`,doc:"Defines an instance method. The method body is enclosed between def and end."},class:{sig:`class Name < Super
  body
end`,doc:"Defines or reopens a class. Ruby classes are open \u2014 you can add methods at any time."},module:{sig:`module Name
  body
end`,doc:"Defines a module. Modules are collections of methods and constants. They cannot be instantiated but can be mixed into classes via include or extend."},if:{sig:`if condition
  body
elsif cond
  body
else
  body
end`,doc:"Conditional branch. Executes the body if the condition is truthy (anything other than false or nil)."},elsif:{sig:"elsif condition",doc:"Additional conditional branch in an if expression."},else:{sig:"else",doc:"Default branch executed when no preceding conditions match."},unless:{sig:`unless condition
  body
end`,doc:"Inverse conditional. Executes the body if the condition is falsy."},case:{sig:`case expr
when val
  body
else
  body
end`,doc:"Case expression (pattern matching). Uses === for comparisons in when clauses."},when:{sig:"when value",doc:"A branch inside a case expression. Matches using the === operator."},while:{sig:`while condition
  body
end`,doc:"Executes the body repeatedly as long as the condition is truthy."},until:{sig:`until condition
  body
end`,doc:"Executes the body repeatedly until the condition becomes truthy."},for:{sig:`for var in collection
  body
end`,doc:"Iterates over a collection. Prefer .each in idiomatic Ruby."},do:{sig:`do |args|
  body
end`,doc:"Begins a multi-line block passed to a method. Use braces {} for single-line blocks."},begin:{sig:`begin
  body
rescue E => e
  handle
ensure
  cleanup
end`,doc:"Begins an exception-handling block."},rescue:{sig:"rescue ExceptionClass => variable",doc:"Catches exceptions in a begin or method body. Defaults to StandardError."},ensure:{sig:`ensure
  cleanup_code
end`,doc:"Code that always executes, whether an exception was raised or not. Similar to finally in other languages."},raise:{sig:`raise "message"
raise ErrorClass, "msg"`,doc:"Raises an exception. Can take a string, exception class, or exception instance."},return:{sig:"return value",doc:"Returns a value from a method. The last expression in a method is implicitly returned."},yield:{sig:"yield(args)",doc:"Invokes the block passed to the current method. Raises LocalJumpError if no block given."},"block_given?":{sig:"block_given? \u2192 true/false",doc:"Returns true if a block was passed to the current method."},self:{sig:"self",doc:"Refers to the current object \u2014 the receiver of the current method."},super:{sig:`super
super(args)`,doc:"Calls the same-named method in the superclass. Without parentheses, forwards all arguments."},nil:{sig:"nil",doc:"The singleton instance of NilClass. Represents the absence of a value. Falsy."},true:{sig:"true",doc:"The singleton instance of TrueClass. Boolean true."},false:{sig:"false",doc:"The singleton instance of FalseClass. Boolean false."},and:{sig:"expr and expr",doc:"Logical AND with low precedence. Prefer && in conditionals."},or:{sig:"expr or expr",doc:"Logical OR with low precedence. Prefer || in conditionals."},not:{sig:"not expr",doc:"Logical negation with low precedence. Prefer ! in conditionals."},in:{sig:`for x in collection
in pattern (Ruby 3+)`,doc:"Used in for loops and pattern matching (case/in)."},end:{sig:"end",doc:"Closes a block, method, class, module, or control structure."},require:{sig:"require 'library'",doc:"Loads and executes a Ruby file or gem. Each file is loaded only once."},require_relative:{sig:"require_relative 'path'",doc:"Loads a file relative to the directory of the current file."},include:{sig:"include ModuleName",doc:"Mixes a module\u2019s instance methods into a class."},extend:{sig:"extend ModuleName",doc:"Adds a module\u2019s methods as class methods (singleton methods)."},prepend:{sig:"prepend ModuleName",doc:"Like include, but inserts the module before the class in the method lookup chain."},attr_accessor:{sig:"attr_accessor :name, :age",doc:"Creates getter and setter methods for the named attributes."},attr_reader:{sig:"attr_reader :name",doc:"Creates getter methods for the named attributes (read-only)."},attr_writer:{sig:"attr_writer :name",doc:"Creates setter methods for the named attributes (write-only)."},public:{sig:"public :method_name",doc:"Makes methods public (default visibility). Can be used as a section marker."},private:{sig:"private :method_name",doc:"Makes methods accessible only within the class and its subclasses (no explicit receiver)."},protected:{sig:"protected :method_name",doc:"Makes methods accessible from instances of the same class and subclasses."},lambda:{sig:`->(args) { body }
lambda { |args| body }`,doc:"Creates a lambda (strict Proc). Checks argument count and return exits the lambda, not the enclosing method."},proc:{sig:`proc { |args| body }
Proc.new { |args| body }`,doc:"Creates a Proc. Lenient with arguments; return exits the enclosing method."},puts:{sig:"puts(obj, ...) \u2192 nil",doc:"Writes objects to stdout, each followed by a newline. Calls .to_s on each argument."},print:{sig:"print(obj, ...) \u2192 nil",doc:"Writes objects to stdout without a trailing newline."},p:{sig:"p(obj, ...) \u2192 obj",doc:"Calls .inspect on each argument and writes to stdout. Returns the object. Useful for debugging."},pp:{sig:"pp(obj, ...) \u2192 obj",doc:"Pretty-prints objects to stdout using the pp library."},freeze:{sig:"obj.freeze \u2192 obj",doc:"Prevents further modifications to the object. Frozen objects raise FrozenError on mutation attempts."},"frozen?":{sig:"obj.frozen? \u2192 true/false",doc:"Returns true if the object is frozen."},alias:{sig:"alias new_name old_name",doc:"Creates an alias for a method. The alias persists even if the original method is later redefined."},"defined?":{sig:"defined?(expression) \u2192 String or nil",doc:"Returns a string describing the expression, or nil if it is undefined."},retry:{sig:"retry",doc:"Re-executes the begin block from the start. Used inside rescue."},break:{sig:`break
break value`,doc:"Exits a loop or block, optionally returning a value."},next:{sig:`next
next value`,doc:"Skips to the next iteration of a loop or block."},redo:{sig:"redo",doc:"Restarts the current iteration of a loop without re-evaluating the condition."},throw:{sig:"throw :tag, value",doc:"Non-local exit. Unwinds the stack to the matching catch block."},catch:{sig:"catch(:tag) { body }",doc:"Establishes a catch point for a matching throw."},String:{sig:"class String",doc:"Mutable sequence of bytes representing characters. Supports interpolation in double quotes."},Array:{sig:"class Array",doc:"Ordered, integer-indexed collection. Heterogeneous \u2014 can contain objects of any type."},Hash:{sig:"class Hash",doc:'Key-value store (dictionary). { key: "value", name: "Ruby" }. Keys can be any object.'},Integer:{sig:"class Integer < Numeric",doc:"Arbitrary-precision integer. Ruby auto-promotes from fixed to big integers as needed."},Float:{sig:"class Float < Numeric",doc:"Double-precision floating-point number (IEEE 754)."},Symbol:{sig:"class Symbol",doc:"Immutable, interned string identifier. :name. Symbols are unique \u2014 :foo.object_id == :foo.object_id is always true."},Range:{sig:"class Range",doc:"Represents an interval between two values. 1..10 (inclusive) or 1...10 (exclusive end)."},Regexp:{sig:"class Regexp",doc:"Regular expression pattern. /pattern/flags. Supports Oniguruma regex syntax."},Proc:{sig:"class Proc",doc:"Encapsulates a block of code that can be stored and called later. Created via Proc.new, proc, or lambda."},IO:{sig:"class IO",doc:"Base class for input/output. Parent of File. Handles reading/writing to streams."},File:{sig:"class File < IO",doc:"Represents a file system file. Provides methods for reading, writing, and querying file metadata."},Dir:{sig:"class Dir",doc:"Represents a directory. Provides methods for listing contents, changing directories, and globbing."},Enumerable:{sig:"module Enumerable",doc:"Mixin that provides collection methods (map, select, reduce, etc.) to any class implementing each."},Comparable:{sig:"module Comparable",doc:"Mixin that provides comparison operators (<, >, between?, clamp) to any class implementing <=>."},Struct:{sig:"Struct.new(:attr1, :attr2)",doc:"Convenient way to create classes with named attributes. Generates accessors, ==, to_s, etc."},Object:{sig:"class Object < BasicObject",doc:"Default superclass of all Ruby classes. Includes Kernel module."},Kernel:{sig:"module Kernel",doc:"Module mixed into Object. Provides global methods like puts, require, raise, rand, sleep."},Thread:{sig:"class Thread",doc:"Lightweight concurrency primitive. Ruby threads are native OS threads with a Global VM Lock (GVL)."},Fiber:{sig:"class Fiber",doc:"Lightweight cooperative concurrency primitive. Must be explicitly resumed. Used for generators and coroutines."},Exception:{sig:"class Exception",doc:"Root class of the exception hierarchy. Rescue StandardError (not Exception) in general code."},StandardError:{sig:"class StandardError < Exception",doc:"Base class for most rescuable errors. The default class caught by rescue without arguments."},RuntimeError:{sig:"class RuntimeError < StandardError",doc:'Default error raised by raise "message" without specifying a class.'},TypeError:{sig:"class TypeError < StandardError",doc:"Raised when an object is not of the expected type."},ArgumentError:{sig:"class ArgumentError < StandardError",doc:"Raised when a method receives an argument it cannot handle (wrong number, invalid value)."},NameError:{sig:"class NameError < StandardError",doc:"Raised when a name (variable, method, constant) is not found."},NoMethodError:{sig:"class NoMethodError < NameError",doc:"Raised when a method is called on an object that does not define it."},Encoding:{sig:"class Encoding",doc:"Represents a character encoding (UTF-8, ASCII, etc.). Strings carry their encoding."},Numeric:{sig:"class Numeric",doc:"Abstract superclass for all numeric types (Integer, Float, Rational, Complex)."},NilClass:{sig:"class NilClass",doc:"Class of nil. Singleton. nil is falsy and evaluates to false in boolean contexts."},TrueClass:{sig:"class TrueClass",doc:"Class of true. Singleton boolean value."},FalseClass:{sig:"class FalseClass",doc:"Class of false. Singleton. Together with nil, the only falsy values in Ruby."},each:{sig:"collection.each { |item| block }",doc:"Calls the block once for each element in the collection. The fundamental iterator in Ruby."},map:{sig:"collection.map { |item| block } \u2192 Array",doc:"Returns a new array containing the results of running the block for every element. Also aliased as collect."},select:{sig:"collection.select { |item| block } \u2192 Array",doc:"Returns a new array containing elements for which the block returns true. Also aliased as filter."},reject:{sig:"collection.reject { |item| block } \u2192 Array",doc:"Returns a new array excluding elements for which the block returns true. Inverse of select."},reduce:{sig:"collection.reduce(init) { |memo, item| block } \u2192 obj",doc:"Combines all elements by applying a binary operation. Also aliased as inject."},inject:{sig:"collection.inject(init) { |memo, item| block } \u2192 obj",doc:"Alias for reduce. Combines all elements using the block or a named method."},find:{sig:"collection.find { |item| block } \u2192 obj or nil",doc:"Returns the first element for which the block returns true. Also aliased as detect."},"any?":{sig:"collection.any? { |item| block } \u2192 true/false",doc:"Returns true if the block returns true for at least one element."},"all?":{sig:"collection.all? { |item| block } \u2192 true/false",doc:"Returns true if the block returns true for every element."},"none?":{sig:"collection.none? { |item| block } \u2192 true/false",doc:"Returns true if the block returns false for every element."},count:{sig:`collection.count \u2192 Integer
collection.count(obj) \u2192 Integer`,doc:"Returns the number of elements, or the number equal to the argument, or matching the block."},sort:{sig:`collection.sort \u2192 Array
collection.sort { |a, b| block } \u2192 Array`,doc:"Returns a sorted array. Uses <=> or a custom comparison block."},sort_by:{sig:"collection.sort_by { |item| key } \u2192 Array",doc:"Sorts by the value returned by the block (Schwartzian transform). More efficient than sort with a block."},flat_map:{sig:"collection.flat_map { |item| block } \u2192 Array",doc:"Maps each element and flattens the result by one level."},group_by:{sig:"collection.group_by { |item| key } \u2192 Hash",doc:"Groups elements into a hash where keys are block return values and values are arrays of matching elements."},each_with_index:{sig:"collection.each_with_index { |item, i| block }",doc:"Calls the block with each element and its index."},each_with_object:{sig:"collection.each_with_object(obj) { |item, memo| block } \u2192 obj",doc:"Iterates with an accumulator object that is passed to each iteration and returned at the end."},zip:{sig:"array.zip(other, ...) \u2192 Array",doc:"Combines elements from multiple arrays into arrays of tuples."},compact:{sig:"array.compact \u2192 Array",doc:"Returns a new array with all nil elements removed."},uniq:{sig:"array.uniq \u2192 Array",doc:"Returns a new array with duplicate elements removed."},flatten:{sig:"array.flatten \u2192 Array",doc:"Returns a one-dimensional array by recursively flattening nested arrays."},reverse:{sig:"array.reverse \u2192 Array",doc:"Returns a new array with elements in reverse order."},first:{sig:`array.first \u2192 obj
array.first(n) \u2192 Array`,doc:"Returns the first element, or the first n elements."},last:{sig:`array.last \u2192 obj
array.last(n) \u2192 Array`,doc:"Returns the last element, or the last n elements."},push:{sig:"array.push(obj, ...) \u2192 Array",doc:"Appends objects to the end of the array. Also available via <<."},pop:{sig:"array.pop \u2192 obj or nil",doc:"Removes and returns the last element. Returns nil if empty."},shift:{sig:"array.shift \u2192 obj or nil",doc:"Removes and returns the first element."},unshift:{sig:"array.unshift(obj, ...) \u2192 Array",doc:"Prepends objects to the front of the array. Also aliased as prepend."},join:{sig:'array.join(separator="") \u2192 String',doc:"Returns a string of all elements joined by the separator."},"include?":{sig:"collection.include?(obj) \u2192 true/false",doc:"Returns true if the collection contains the given object (using ==)."},"empty?":{sig:"collection.empty? \u2192 true/false",doc:"Returns true if the collection has no elements."},"nil?":{sig:"obj.nil? \u2192 true/false",doc:"Returns true only for nil. All other objects return false."},length:{sig:"obj.length \u2192 Integer",doc:"Returns the length/size of the object (string, array, hash, etc.)."},size:{sig:"obj.size \u2192 Integer",doc:"Alias for length. Returns the number of elements or characters."},to_s:{sig:"obj.to_s \u2192 String",doc:"Returns a string representation of the object."},to_i:{sig:"obj.to_i \u2192 Integer",doc:"Converts the object to an integer. Returns 0 if conversion fails."},to_f:{sig:"obj.to_f \u2192 Float",doc:"Converts the object to a float. Returns 0.0 if conversion fails."},to_a:{sig:"obj.to_a \u2192 Array",doc:"Converts the object to an array."},to_h:{sig:"obj.to_h \u2192 Hash",doc:"Converts the object to a hash."},inspect:{sig:"obj.inspect \u2192 String",doc:"Returns a human-readable string representation, useful for debugging."},"respond_to?":{sig:"obj.respond_to?(method_name) \u2192 true/false",doc:"Returns true if the object responds to the given method."},"is_a?":{sig:"obj.is_a?(klass) \u2192 true/false",doc:"Returns true if the object is an instance of the given class or its subclass. Alias: kind_of?."},send:{sig:"obj.send(method_name, *args) \u2192 result",doc:"Invokes the named method, passing any arguments. Can call private methods."},new:{sig:"ClassName.new(args) \u2192 instance",doc:"Creates a new instance of the class. Calls initialize with the given arguments."},initialize:{sig:`def initialize(args)
  # constructor body
end`,doc:"Constructor method called by .new. Always private. Set up instance variables here."},open:{sig:`File.open(path, mode) { |f| block }
File.open(path, mode) \u2192 File`,doc:"Opens a file. With a block, automatically closes the file when the block exits."},split:{sig:"str.split(pattern=nil, limit=-1) \u2192 Array",doc:"Divides a string into substrings based on a delimiter pattern."},strip:{sig:"str.strip \u2192 String",doc:"Returns a copy with leading and trailing whitespace removed."},chomp:{sig:"str.chomp(separator=$/) \u2192 String",doc:"Returns a copy with the trailing record separator removed (default: newline)."},gsub:{sig:"str.gsub(pattern, replacement) \u2192 String",doc:"Returns a copy with all occurrences of the pattern replaced."},sub:{sig:"str.sub(pattern, replacement) \u2192 String",doc:"Returns a copy with the first occurrence of the pattern replaced."},match:{sig:"str.match(pattern) \u2192 MatchData or nil",doc:"Matches the string against a regular expression, returning MatchData or nil."},tap:{sig:"obj.tap { |x| block } \u2192 obj",doc:"Yields the object to the block and returns the object. Useful for inserting debugging into call chains."},then:{sig:"obj.then { |x| block } \u2192 result",doc:"Yields the object to the block and returns the result of the block. Also aliased as yield_self."},dup:{sig:"obj.dup \u2192 copy",doc:"Creates a shallow copy of the object. Unfreezes the copy."},clone:{sig:"obj.clone \u2192 copy",doc:"Creates a shallow copy of the object, preserving frozen state and singleton methods."},rand:{sig:"rand(max=0) \u2192 Numeric",doc:"Returns a random number. rand(10) \u2192 0..9. rand \u2192 0.0...1.0."},sleep:{sig:"sleep(seconds) \u2192 Integer",doc:"Suspends the current thread for the given number of seconds."},loop:{sig:"loop { block }",doc:"Executes the block repeatedly forever. Break with break."},sum:{sig:"collection.sum(init=0) \u2192 Numeric",doc:"Returns the sum of all elements, plus an optional initial value."},min:{sig:"collection.min \u2192 obj",doc:"Returns the minimum element (using <=>)."},max:{sig:"collection.max \u2192 obj",doc:"Returns the maximum element (using <=>)."},sample:{sig:`array.sample \u2192 obj
array.sample(n) \u2192 Array`,doc:"Returns one or more random elements from the array."},shuffle:{sig:"array.shuffle \u2192 Array",doc:"Returns a new array with elements in random order."},take:{sig:"collection.take(n) \u2192 Array",doc:"Returns the first n elements."},drop:{sig:"collection.drop(n) \u2192 Array",doc:"Returns all elements after the first n."},keys:{sig:"hash.keys \u2192 Array",doc:"Returns an array of all keys in the hash."},values:{sig:"hash.values \u2192 Array",doc:"Returns an array of all values in the hash."},merge:{sig:"hash.merge(other) \u2192 Hash",doc:"Returns a new hash combining both hashes. Values from other win on key conflicts."},fetch:{sig:`hash.fetch(key)
hash.fetch(key, default)`,doc:"Returns the value for the key. Raises KeyError if missing (unlike [] which returns nil)."},delete:{sig:"hash.delete(key) \u2192 value or nil",doc:"Removes the key-value pair and returns the value, or nil if not found."},each_pair:{sig:"hash.each_pair { |key, val| block }",doc:"Calls the block with each key-value pair. Alias for each on Hash."},"map!":{sig:"array.map! { |item| block } \u2192 Array",doc:"Modifies the array in place, replacing each element with the block result. Alias: collect!."},"select!":{sig:"array.select! { |item| block } \u2192 Array or nil",doc:"Keeps only elements for which the block returns true, modifying the array in place."},tally:{sig:"collection.tally \u2192 Hash",doc:"Counts occurrences of each element. Returns a hash of element => count."},chunk:{sig:"collection.chunk { |item| key } \u2192 Enumerator",doc:"Groups consecutive elements that share the same block return value."},dig:{sig:"obj.dig(key, ...) \u2192 value or nil",doc:"Navigates into nested hashes/arrays. Returns nil if any intermediate key is missing."}},R=[{label:"def",detail:"Method definition",insert:"def ${1:method_name}(${2:args})\n  ${0}\nend"},{label:"defs",detail:"Class method definition",insert:"def self.${1:method_name}(${2:args})\n  ${0}\nend"},{label:"class",detail:"Class definition",insert:"class ${1:ClassName}\n  ${0}\nend"},{label:"classi",detail:"Class with initialize",insert:`class \${1:ClassName}
  def initialize(\${2:args})
    \${0}
  end
end`},{label:"classp",detail:"Class with parent",insert:"class ${1:ClassName} < ${2:ParentClass}\n  def initialize(${3:args})\n    super(${4})\n    ${0}\n  end\nend"},{label:"module",detail:"Module definition",insert:"module ${1:ModuleName}\n  ${0}\nend"},{label:"if",detail:"if / end",insert:"if ${1:condition}\n  ${0}\nend"},{label:"ife",detail:"if / else / end",insert:`if \${1:condition}
  \${2}
else
  \${0}
end`},{label:"ifel",detail:"if / elsif / else / end",insert:`if \${1:condition}
  \${2}
elsif \${3:condition}
  \${4}
else
  \${0}
end`},{label:"unless",detail:"unless / end",insert:"unless ${1:condition}\n  ${0}\nend"},{label:"case",detail:"case / when / end",insert:`case \${1:expression}
when \${2:value}
  \${3}
when \${4:value}
  \${5}
else
  \${0}
end`},{label:"while",detail:"while / end",insert:"while ${1:condition}\n  ${0}\nend"},{label:"until",detail:"until / end",insert:"until ${1:condition}\n  ${0}\nend"},{label:"begin",detail:"begin / rescue / end",insert:"begin\n  ${1}\nrescue ${2:StandardError} => ${3:e}\n  ${0}\nend"},{label:"beginf",detail:"begin / rescue / ensure",insert:`begin
  \${1}
rescue \${2:StandardError} => \${3:e}
  \${4}
ensure
  \${0}
end`},{label:"each",detail:".each do |item| ... end",insert:"each do |${1:item}|\n  ${0}\nend"},{label:"eachi",detail:".each_with_index do ... end",insert:"each_with_index do |${1:item}, ${2:index}|\n  ${0}\nend"},{label:"mapit",detail:".map do |item| ... end",insert:"map do |${1:item}|\n  ${0}\nend"},{label:"sel",detail:".select do |item| ... end",insert:"select do |${1:item}|\n  ${0}\nend"},{label:"red",detail:".reduce do ... end",insert:"reduce(${1:initial}) do |${2:memo}, ${3:item}|\n  ${0}\nend"},{label:"do",detail:"do |args| ... end block",insert:"do |${1}|\n  ${0}\nend"},{label:"init",detail:"initialize method",insert:"def initialize(${1:args})\n  ${0}\nend"},{label:"frozen",detail:"frozen_string_literal",insert:"# frozen_string_literal: true\n${0}"},{label:"lam",detail:"Lambda (stabby)",insert:"->(${1:args}) { ${0} }"},{label:"prc",detail:"Proc.new",insert:"proc { |${1:args}| ${0} }"},{label:"attr",detail:"attr_accessor",insert:"attr_accessor :${0}"},{label:"attrr",detail:"attr_reader",insert:"attr_reader :${0}"},{label:"attrw",detail:"attr_writer",insert:"attr_writer :${0}"},{label:"req",detail:"require 'lib'",insert:"require '${0}'"},{label:"reqr",detail:"require_relative 'path'",insert:"require_relative '${0}'"},{label:"struct",detail:"Struct definition",insert:"${1:Name} = Struct.new(:${2:attr1}, :${3:attr2}) do\n  ${0}\nend"},{label:"forr",detail:"for loop",insert:"for ${1:item} in ${2:collection}\n  ${0}\nend"},{label:"loopd",detail:"loop do ... end",insert:`loop do
  \${0}
  break if \${1:condition}
end`},{label:"fopen",detail:"File.open block",insert:"File.open('${1:path}', '${2:r}') do |${3:f}|\n  ${0}\nend"},{label:"rais",detail:"raise exception",insert:"raise ${1:RuntimeError}, '${0:message}'"}],C=["each","map","select","reject","reduce","inject","find","detect","any?","all?","none?","count","sort","sort_by","reverse","flat_map","group_by","zip","compact","uniq","flatten","first","last","push","pop","shift","unshift","join","split","strip","chomp","chop","gsub","sub","match","scan","include?","empty?","nil?","length","size","to_s","to_i","to_f","to_a","to_h","to_sym","inspect","freeze","frozen?","dup","clone","tap","then","yield_self","respond_to?","is_a?","kind_of?","instance_of?","send","public_send","method","methods","class","object_id","hash","equal?","eql?","taint","untaint","tainted?","each_with_index","each_with_object","each_slice","each_cons","chunk","min","max","min_by","max_by","minmax","minmax_by","sum","tally","sample","shuffle","take","take_while","drop","drop_while","select!","reject!","map!","collect!","flatten!","compact!","uniq!","reverse!","sort!","sort_by!","rotate","rotate!","delete","delete_at","delete_if","keep_if","index","rindex","at","fetch","dig","slice","values_at","assoc","rassoc","combination","permutation","product","transpose","pack","concat","append","prepend","insert","keys","values","merge","merge!","update","each_pair","each_key","each_value","has_key?","has_value?","key?","value?","store","to_proc","call","arity","curry","upcase","downcase","capitalize","swapcase","center","ljust","rjust","chars","bytes","lines","encode","encoding","force_encoding","b","start_with?","end_with?","replace","clear","hex","oct","succ","next","upto","downto","times","abs","ceil","floor","round","truncate","divmod","modulo","remainder","zero?","positive?","negative?","even?","odd?","between?","clamp","infinite?","nan?","finite?","new","open","read","write","close","closed?","puts","print","gets","readline","readlines","each_line","rewind","seek","tell","pos","eof?","exist?","exists?","file?","directory?","readable?","writable?","executable?","basename","dirname","extname","expand_path","absolute_path","glob","entries"];n.languages.register({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru"],aliases:["Ruby","rb"],mimetypes:["text/x-ruby"]}),n.languages.setLanguageConfiguration("ruby",{comments:{lineComment:"#",blockComment:["=begin","=end"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"},{open:"|",close:"|"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"},{open:"|",close:"|"}],indentationRules:{increaseIndentPattern:/^\s*(module|class|def|if|unless|case|while|until|for|begin|else|elsif|ensure|rescue|when|do)\b(?!.*\bend\b).*$/,decreaseIndentPattern:/^\s*(end|else|elsif|ensure|rescue|when)\b.*$/},folding:{markers:{start:/^\s*(#\s*region\b|module\b|class\b|def\b|if\b|unless\b|case\b|while\b|until\b|for\b|begin\b|do\b)/,end:/^\s*(#\s*endregion\b|end\b)/}},onEnterRules:[{beforeText:/^\s*(def|class|module|if|unless|case|while|until|for|begin|do|else|elsif|rescue|ensure|when)\b.*$/,action:{indentAction:n.languages.IndentAction.Indent}}],wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g}),n.languages.setMonarchTokensProvider("ruby",{defaultToken:"",tokenPostfix:".ruby",keywords:["BEGIN","END","alias","and","begin","break","case","class","def","defined?","do","else","elsif","end","ensure","false","for","if","in","module","next","nil","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","__FILE__","__LINE__","__ENCODING__"],builtinFunctions:["require","require_relative","include","extend","prepend","attr_accessor","attr_reader","attr_writer","public","private","protected","raise","throw","catch","proc","lambda","puts","print","p","pp","warn","fail","block_given?","loop","sleep","rand","srand","exit","abort","at_exit","freeze","frozen?","sprintf","format","gets","readline"],builtinTypes:["Array","Hash","String","Integer","Float","Symbol","Range","Regexp","Proc","Method","IO","File","Dir","Time","Struct","OpenStruct","Comparable","Enumerable","Enumerator","Thread","Mutex","Fiber","Rational","Complex","Numeric","TrueClass","FalseClass","NilClass","Object","BasicObject","Kernel","Module","Class","Exception","StandardError","RuntimeError","TypeError","ArgumentError","NameError","NoMethodError","IOError","Encoding","GC","ObjectSpace","Process","Signal","Math","ENV","ARGV","ARGF","STDIN","STDOUT","STDERR","DATA","TRUE","FALSE","NIL"],escapes:/\\(?:[abefnrstv\\"'0]|x[0-9A-Fa-f]{1,2}|u[0-9A-Fa-f]{4}|u\{[0-9A-Fa-f]+\})/,symbols:/[=><!~?:&|+\-*\/\^%\.]+/,tokenizer:{root:[[/\s+/,"white"],[/^=begin\b/,"comment","@multiComment"],[/#.*$/,"comment"],[/<<[-~]?(\w+)/,{token:"string.heredoc.delimiter",next:"@heredoc.$1"}],[/<<[-~]?"(\w+)"/,{token:"string.heredoc.delimiter",next:"@heredoc.$1"}],[/<<[-~]?'(\w+)'/,{token:"string.heredoc.delimiter",next:"@heredocPlain.$1"}],[/:[a-zA-Z_]\w*[!?=]?/,"string.symbol"],[/:"/,"string.symbol","@symbolString"],[/0[xX][0-9a-fA-F](_?[0-9a-fA-F])*/,"number.hex"],[/0[oO][0-7](_?[0-7])*/,"number.octal"],[/0[bB][01](_?[01])*/,"number.binary"],[/\d(_?\d)*\.\d(_?\d)*([eE][-+]?\d+)?/,"number.float"],[/\d(_?\d)*[eE][-+]?\d+/,"number.float"],[/\d(_?\d)*r?i?/,"number"],[/@@[a-zA-Z_]\w*/,"variable"],[/@[a-zA-Z_]\w*/,"variable"],[/\$[a-zA-Z_]\w*/,"variable"],[/\$[!@&`'+~=\/\\,;.<>*$?:"]/,"variable"],[/\$-\w/,"variable"],[/\$\d+/,"variable"],[/[A-Z]\w*/,{cases:{"@builtinTypes":"type","@default":"type.identifier"}}],[/(def)(\s+)(self)(\.)?([a-zA-Z_]\w*[!?=]?)/,["keyword","white","variable","delimiter","identifier.method"]],[/(def)(\s+)([a-zA-Z_]\w*[!?=]?)/,["keyword","white","identifier.method"]],[/[a-zA-Z_]\w*[!?]?/,{cases:{"@keywords":"keyword","@builtinFunctions":"support.function","@default":"identifier"}}],[/"/,"string","@doubleString"],[/'/,"string","@singleString"],[/`/,"string","@backtickString"],[/%[qQ]?\(/,"string","@pctParen"],[/%[qQ]?\[/,"string","@pctBracket"],[/%[qQ]?\{/,"string","@pctBrace"],[/%[wWiI]\(/,"string","@pctParen"],[/%[wWiI]\[/,"string","@pctBracket"],[/%[wWiI]\{/,"string","@pctBrace"],[/%r\(/,"regexp","@regexpParen"],[/%r\[/,"regexp","@regexpBracket"],[/%r\{/,"regexp","@regexpBrace"],[/\/(?=[^\/\*\s])(?:[^\/\\]|\\.)*\/[imxo]*/,"regexp"],[/[{}()\[\]]/,"@brackets"],[/[;,]/,"delimiter"],[/\.\.\.?/,"operator"],[/=>/,"operator"],[/->/,"operator"],[/<<=?|>>=?|<=>|===|!~|=~|&&|\|\||[!=<>]=?|[&|^~+\-*\/%]=?|\*\*=?/,"operator"],[/[?:]/,"operator"]],multiComment:[[/^=end\b/,"comment","@pop"],[/.*/,"comment"]],heredoc:[[/^(\s*)(\w+)\s*$/,{cases:{"$2==$S2":{token:"string.heredoc.delimiter",next:"@pop"},"@default":"string.heredoc"}}],[/#\{/,{token:"string.interpolation",next:"@interpolation"}],[/.*/,"string.heredoc"]],heredocPlain:[[/^(\s*)(\w+)\s*$/,{cases:{"$2==$S2":{token:"string.heredoc.delimiter",next:"@pop"},"@default":"string.heredoc"}}],[/.*/,"string.heredoc"]],doubleString:[[/[^\\\"#]+/,"string"],[/#\{/,{token:"string.interpolation",next:"@interpolation"}],[/#[@$]/,"string.interpolation"],[/@escapes/,"string.escape"],[/\\./,"string.escape"],[/"/,"string","@pop"]],singleString:[[/[^\\']+/,"string"],[/\\./,"string.escape"],[/'/,"string","@pop"]],backtickString:[[/[^\\`#]+/,"string"],[/#\{/,{token:"string.interpolation",next:"@interpolation"}],[/@escapes/,"string.escape"],[/\\./,"string.escape"],[/`/,"string","@pop"]],symbolString:[[/[^\\"#]+/,"string.symbol"],[/#\{/,{token:"string.interpolation",next:"@interpolation"}],[/@escapes/,"string.escape"],[/\\./,"string.escape"],[/"/,"string.symbol","@pop"]],interpolation:[[/\}/,{token:"string.interpolation",next:"@pop"}],{include:"root"}],pctParen:[[/[^\\)#]+/,"string"],[/#\{/,{token:"string.interpolation",next:"@interpolation"}],[/\\./,"string.escape"],[/\)/,"string","@pop"]],pctBracket:[[/[^\\\]#]+/,"string"],[/#\{/,{token:"string.interpolation",next:"@interpolation"}],[/\\./,"string.escape"],[/\]/,"string","@pop"]],pctBrace:[[/[^\\}#]+/,"string"],[/#\{/,{token:"string.interpolation",next:"@interpolation"}],[/\\./,"string.escape"],[/\}/,"string","@pop"]],regexpParen:[[/[^\\)]+/,"regexp"],[/\\./,"regexp.escape"],[/\)[imxo]*/,"regexp","@pop"]],regexpBracket:[[/[^\\\]]+/,"regexp"],[/\\./,"regexp.escape"],[/\][imxo]*/,"regexp","@pop"]],regexpBrace:[[/[^\\}]+/,"regexp"],[/\\./,"regexp.escape"],[/\}[imxo]*/,"regexp","@pop"]]}}),n.languages.registerCompletionItemProvider("ruby",{triggerCharacters:[".",":","@"],provideCompletionItems:function(c,i){var o=c.getWordUntilPosition(i),r={startLineNumber:i.lineNumber,endLineNumber:i.lineNumber,startColumn:o.startColumn,endColumn:o.endColumn},a=c.getLineContent(i.lineNumber),e=a.substring(0,o.startColumn-1),u=e.trimEnd().endsWith("."),d=e.trimEnd().endsWith("::"),l=[];if(u){var f=[],s={};return C.forEach(function(t){s[t]||(s[t]=!0,f.push(t))}),f.forEach(function(t){var m=k[t];l.push({label:t,kind:n.languages.CompletionItemKind.Method,insertText:t,range:r,detail:m?m.sig.split(`
`)[0]:"method",documentation:m?m.doc:void 0,sortText:"0"+t})}),{suggestions:l}}if(d){var y=["Array","Hash","String","Integer","Float","Symbol","Range","Regexp","Proc","IO","File","Dir","Time","Struct","Thread","Fiber","Encoding","GC","Math","Process","Enumerable","Comparable","Kernel","Object"];return y.forEach(function(t){l.push({label:t,kind:n.languages.CompletionItemKind.Class,insertText:t,range:r,detail:"class/module"})}),["new","open","read","write","exist?","delete","glob","entries","foreach"].forEach(function(t){l.push({label:t,kind:n.languages.CompletionItemKind.Method,insertText:t,range:r,detail:"class method"})}),{suggestions:l}}var x=["BEGIN","END","alias","and","begin","break","case","class","def","defined?","do","else","elsif","end","ensure","false","for","if","in","module","next","nil","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","__FILE__","__LINE__","__ENCODING__","require","require_relative","include","extend","prepend","attr_accessor","attr_reader","attr_writer","public","private","protected","raise","throw","catch","proc","lambda","puts","print","p","pp","freeze","frozen?","block_given?","loop","sleep","rand"];x.forEach(function(t){var m=k[t];l.push({label:t,kind:n.languages.CompletionItemKind.Keyword,insertText:t,range:r,detail:"keyword",documentation:m?m.doc:void 0,sortText:"1"+t})});var v=["Array","Hash","String","Integer","Float","Symbol","Range","Regexp","Proc","Method","IO","File","Dir","Time","Struct","OpenStruct","Comparable","Enumerable","Enumerator","Thread","Mutex","Fiber","Rational","Complex","Numeric","TrueClass","FalseClass","NilClass","Object","BasicObject","Kernel","Module","Class","Exception","StandardError","RuntimeError","TypeError","ArgumentError","NameError","NoMethodError","IOError","Encoding","Math"];v.forEach(function(t){var m=k[t];l.push({label:t,kind:n.languages.CompletionItemKind.Class,insertText:t,range:r,detail:"class",documentation:m?m.doc:void 0,sortText:"2"+t})}),R.forEach(function(t){l.push({label:t.label,kind:n.languages.CompletionItemKind.Snippet,insertText:t.insert,insertTextRules:n.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:r,detail:t.detail+" (snippet)",documentation:"Inserts: "+t.insert.replace(/\$\{\d+:?([^}]*)\}/g,"$1").replace(/\$\d+/g,""),sortText:"0"+t.label})});for(var b=c.getLinesContent(),h={},w=0;w<b.length;w++){var p=b[w],g;g=p.match(/\bdef\s+(?:self\.)?(\w+[!?=]?)/),g&&(h[g[1]]=!0),g=p.match(/\bclass\s+(\w+)/),g&&(h[g[1]]=!0),g=p.match(/\bmodule\s+(\w+)/),g&&(h[g[1]]=!0),g=p.match(/([A-Z][A-Z_0-9]+)\s*=/),g&&(h[g[1]]=!0)}var _={};return l.forEach(function(t){_[t.label]=!0}),Object.keys(h).forEach(function(t){_[t]||l.push({label:t,kind:t.match(/^[A-Z]/)?n.languages.CompletionItemKind.Class:n.languages.CompletionItemKind.Function,insertText:t,range:r,detail:"user-defined",sortText:"3"+t})}),{suggestions:l}}}),n.languages.registerHoverProvider("ruby",{provideHover:function(c,i){var o=c.getWordAtPosition(i);if(!o)return null;var r=c.getLineContent(i.lineNumber),a=r.substring(Math.max(0,o.startColumn-3),o.startColumn-1),e=o.word,u="";if(a.endsWith("@@")?u="@@":a.endsWith("@")?u="@":a.endsWith("$")&&(u="$"),u){for(var d=u+o.word,l={"@":"Instance variable","@@":"Class variable",$:"Global variable"},f=c.getLinesContent(),s=null,y=0;y<f.length;y++){var x=new RegExp(d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"\\s*=\\s*(.+)"),v=f[y].match(x);if(v){s=v[1].trim();break}}return{range:new n.Range(i.lineNumber,o.startColumn,i.lineNumber,o.endColumn),contents:[{value:"```ruby\n"+d+"\n```"},{value:l[u]+(s?`

Assigned: \``+s+"`":"")}]}}var b=k[e];if(b){var h=[];return b.sig&&h.push({value:"```ruby\n"+b.sig+"\n```"}),b.doc&&h.push({value:b.doc}),{range:new n.Range(i.lineNumber,o.startColumn,i.lineNumber,o.endColumn),contents:h}}for(var w=c.getLinesContent(),p=0;p<w.length;p++){var g=new RegExp("\\b(def|class|module)\\s+(?:self\\.)?("+e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+")\\b"),_=w[p].match(g);if(_)return{range:new n.Range(i.lineNumber,o.startColumn,i.lineNumber,o.endColumn),contents:[{value:"```ruby\n"+w[p].trim()+"\n```"},{value:"Defined at line "+(p+1)}]}}return null}}),n.languages.registerDefinitionProvider("ruby",{provideDefinition:function(c,i){var o=c.getWordAtPosition(i);if(!o)return null;for(var r=o.word,a=c.getLinesContent(),e=[],u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),d=0;d<a.length;d++){var l=a[d],f=new RegExp("\\b(def)\\s+(?:self\\.)?("+u+")\\b"),s=l.match(f);if(s){var y=l.indexOf(s[2],s.index+s[1].length)+1;e.push({uri:c.uri,range:new n.Range(d+1,y,d+1,y+s[2].length)})}var x=new RegExp("\\b(class|module)\\s+("+u+")\\b");if(s=l.match(x),s){var v=l.indexOf(s[2],s.index+s[1].length)+1;e.push({uri:c.uri,range:new n.Range(d+1,v,d+1,v+s[2].length)})}if(r.match(/^[A-Z]/)){var b=new RegExp("\\b("+u+")\\s*=");if(s=l.match(b),s){var h=l.indexOf(s[1])+1;e.push({uri:c.uri,range:new n.Range(d+1,h,d+1,h+s[1].length)})}}}return e.length>0?e:null}}),n.languages.registerSignatureHelpProvider("ruby",{signatureHelpTriggerCharacters:["(",","],provideSignatureHelp:function(c,i){var o=c.getLineContent(i.lineNumber),r=o.substring(0,i.column-1),a=r.match(/(\w+[!?]?)\s*\(([^)]*)$/);if(!a)return null;var e=a[1],u=a[2],d=u.match(/,/g),l=d?d.length:0,f={puts:{label:"puts(obj, ...) \u2192 nil",params:[{label:"obj",documentation:"Object to print (calls .to_s)"}]},print:{label:"print(obj, ...) \u2192 nil",params:[{label:"obj",documentation:"Object to print"}]},p:{label:"p(obj, ...) \u2192 obj",params:[{label:"obj",documentation:"Object to inspect and print"}]},rand:{label:"rand(max=0) \u2192 Numeric",params:[{label:"max",documentation:"Upper bound (exclusive)"}]},sleep:{label:"sleep(seconds) \u2192 Integer",params:[{label:"seconds",documentation:"Number of seconds to sleep"}]},raise:{label:"raise(exception_class, message)",params:[{label:"exception_class",documentation:"Exception class (default: RuntimeError)"},{label:"message",documentation:"Error message string"}]},open:{label:"File.open(filename, mode='r') { |file| ... }",params:[{label:"filename",documentation:"Path to the file"},{label:"mode",documentation:"File mode: 'r', 'w', 'a', 'r+', etc."}]},new:{label:"ClassName.new(args)",params:[{label:"args",documentation:"Arguments passed to initialize"}]},map:{label:"map { |element| block } \u2192 Array",params:[{label:"element",documentation:"Current element"}]},select:{label:"select { |element| block } \u2192 Array",params:[{label:"element",documentation:"Current element"}]},reject:{label:"reject { |element| block } \u2192 Array",params:[{label:"element",documentation:"Current element"}]},reduce:{label:"reduce(initial) { |memo, element| block } \u2192 obj",params:[{label:"initial",documentation:"Initial accumulator value"},{label:"memo",documentation:"Accumulator"}]},each:{label:"each { |element| block } \u2192 self",params:[{label:"element",documentation:"Current element"}]},gsub:{label:"gsub(pattern, replacement) \u2192 String",params:[{label:"pattern",documentation:"Regexp or String to match"},{label:"replacement",documentation:"Replacement string"}]},sub:{label:"sub(pattern, replacement) \u2192 String",params:[{label:"pattern",documentation:"Regexp or String to match"},{label:"replacement",documentation:"Replacement string"}]},split:{label:"split(pattern=nil, limit=-1) \u2192 Array",params:[{label:"pattern",documentation:"Delimiter pattern"},{label:"limit",documentation:"Max number of splits"}]},fetch:{label:"fetch(key, default=nil) \u2192 value",params:[{label:"key",documentation:"Key to look up"},{label:"default",documentation:"Default value if key not found"}]},join:{label:"join(separator='') \u2192 String",params:[{label:"separator",documentation:"String to insert between elements"}]},"include?":{label:"include?(obj) \u2192 true/false",params:[{label:"obj",documentation:"Object to search for"}]},"respond_to?":{label:"respond_to?(method_name) \u2192 true/false",params:[{label:"method_name",documentation:"Method name as symbol or string"}]},"is_a?":{label:"is_a?(klass) \u2192 true/false",params:[{label:"klass",documentation:"Class or module to check against"}]},send:{label:"send(method_name, *args) \u2192 result",params:[{label:"method_name",documentation:"Method to invoke"},{label:"args",documentation:"Arguments to pass"}]},sort_by:{label:"sort_by { |element| key } \u2192 Array",params:[{label:"element",documentation:"Current element"}]},dig:{label:"dig(key, ...) \u2192 value or nil",params:[{label:"key",documentation:"Key for nested lookup"}]},match:{label:"match(pattern) \u2192 MatchData or nil",params:[{label:"pattern",documentation:"Regexp pattern to match"}]},format:{label:"format(format_string, *args) \u2192 String",params:[{label:"format_string",documentation:"Format string with % placeholders"},{label:"args",documentation:"Values to substitute"}]}},s=f[e];return s?{value:{signatures:[{label:s.label,parameters:s.params}],activeSignature:0,activeParameter:Math.min(l,s.params.length-1)},dispose:function(){}}:null}}),n.languages.registerDocumentSymbolProvider("ruby",{provideDocumentSymbols:function(c){for(var i=[],o=c.getLinesContent(),r=0;r<o.length;r++){var a=o[r],e;e=a.match(/\b(class)\s+(\w+)/),e&&i.push({name:e[2],kind:n.languages.SymbolKind.Class,range:new n.Range(r+1,1,r+1,a.length+1),selectionRange:new n.Range(r+1,a.indexOf(e[2])+1,r+1,a.indexOf(e[2])+1+e[2].length)}),e=a.match(/\b(module)\s+(\w+)/),e&&i.push({name:e[2],kind:n.languages.SymbolKind.Module,range:new n.Range(r+1,1,r+1,a.length+1),selectionRange:new n.Range(r+1,a.indexOf(e[2])+1,r+1,a.indexOf(e[2])+1+e[2].length)}),e=a.match(/\bdef\s+(?:self\.)?(\w+[!?=]?)/),e&&i.push({name:e[1],kind:n.languages.SymbolKind.Method,range:new n.Range(r+1,1,r+1,a.length+1),selectionRange:new n.Range(r+1,a.indexOf(e[1])+1,r+1,a.indexOf(e[1])+1+e[1].length)}),e=a.match(/([A-Z][A-Z_0-9]+)\s*=/),e&&i.push({name:e[1],kind:n.languages.SymbolKind.Constant,range:new n.Range(r+1,1,r+1,a.length+1),selectionRange:new n.Range(r+1,a.indexOf(e[1])+1,r+1,a.indexOf(e[1])+1+e[1].length)})}return i}})};export{$ as default};
